{"ast":null,"code":"var _jsxFileName = \"/Users/nehaljhajharia/Desktop/Chikitsa/chikitsa_frontend/src/Appointment.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport UrlContext from './context/UrlContext';\nimport { Button, Modal } from 'react-bootstrap';\nimport AppointmentDetails from './AppointmentDetails';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Appointment = _ref => {\n  _s();\n  let {\n    appointment,\n    userType\n  } = _ref;\n  const [status, setStatus] = useState(appointment.status);\n  const [updatingStatus, setUpdatingStatus] = useState(false);\n  const url = useContext(UrlContext);\n  const user_uri = url + 'api/doctor/update/appointment-status/';\n  const formatTime = dateTimeString => {\n    const dateTime = new Date(dateTimeString);\n    return dateTime.toLocaleTimeString([], {\n      hour: 'numeric',\n      minute: 'numeric'\n    });\n  };\n  const formatDate = dateTimeString => {\n    const dateTime = new Date(dateTimeString);\n    return dateTime.toLocaleDateString();\n  };\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n  const getStatusString = status => {\n    if (status === -2) {\n      return 'Cancelled';\n    } else if (status === -1) {\n      return 'Rejected';\n    } else if (status === 0) {\n      return 'Pending';\n    } else if (status === 1) {\n      return 'Confirmed';\n    } else if (status === 2) {\n      return 'Completed';\n    } else {\n      return 'Unknown';\n    }\n  };\n  const updateAppointmentStatus = async status => {\n    setUpdatingStatus(true);\n    const formData = new FormData();\n    formData.append('appointment_id', appointment.id);\n    formData.append('status', status);\n    try {\n      const response = await fetch(`${user_uri}`, {\n        method: 'PUT',\n        body: formData\n      });\n      if (response.ok) {\n        setStatus(status);\n      } else {\n        console.error('Error updating appointment status:', response.status);\n      }\n    } catch (error) {\n      console.error('Error updating appointment status:', error);\n    } finally {\n      setUpdatingStatus(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      children: appointment.patient\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: appointment.doctor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: formatDate(appointment.datetime)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: formatTime(appointment.datetime)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: getStatusString(status)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleShow,\n        className: \"w-100 mx-auto\",\n        style: {\n          position: 'relative'\n        },\n        children: \"View\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        size: \"lg\",\n        show: show,\n        onHide: handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Appointment Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 24\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(AppointmentDetails, {\n              appointment_id: appointment.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), userType === false && appointment.status === 0 && updatingStatus && /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => updateAppointmentStatus(1),\n          children: \"\\u2713\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => updateAppointmentStatus(-1),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(Appointment, \"+Z2Cz+M9YlSzxdjrr6ysNk+kWo0=\");\n_c = Appointment;\nexport default Appointment;\nvar _c;\n$RefreshReg$(_c, \"Appointment\");","map":{"version":3,"names":["React","useContext","useState","Link","UrlContext","Button","Modal","AppointmentDetails","jsxDEV","_jsxDEV","Appointment","_ref","_s","appointment","userType","status","setStatus","updatingStatus","setUpdatingStatus","url","user_uri","formatTime","dateTimeString","dateTime","Date","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","show","setShow","handleClose","handleShow","getStatusString","updateAppointmentStatus","formData","FormData","append","id","response","fetch","method","body","ok","console","error","children","patient","fileName","_jsxFileName","lineNumber","columnNumber","doctor","datetime","onClick","className","style","position","size","onHide","Header","closeButton","Title","Body","appointment_id","display","_c","$RefreshReg$"],"sources":["/Users/nehaljhajharia/Desktop/Chikitsa/chikitsa_frontend/src/Appointment.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport UrlContext from './context/UrlContext';\nimport { Button, Modal } from 'react-bootstrap';\nimport AppointmentDetails from './AppointmentDetails';\n\nconst Appointment = ({ appointment , userType}) => {\n  const [status, setStatus]  = useState(appointment.status);\n  const [updatingStatus, setUpdatingStatus] = useState(false);\n  const url = useContext(UrlContext);\n  const user_uri = url + 'api/doctor/update/appointment-status/';\n\n  const formatTime = (dateTimeString) => {\n    const dateTime = new Date(dateTimeString);\n    return dateTime.toLocaleTimeString([], { hour: 'numeric', minute: 'numeric' });\n  };\n  const formatDate = (dateTimeString) => {\n    const dateTime = new Date(dateTimeString);\n    return dateTime.toLocaleDateString();\n  };\n\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const getStatusString = (status) => {\n    if(status === -2){\n      return 'Cancelled';\n    }else if(status === -1){\n      return 'Rejected';\n    }else if(status === 0){\n      return 'Pending';\n    }else if(status === 1){\n      return 'Confirmed';\n    }else if(status === 2){\n      return 'Completed';\n    }else{\n      return 'Unknown';\n    }\n  };\n\n  const updateAppointmentStatus = async (status) => {\n    setUpdatingStatus(true);\n    const formData = new FormData();\n    formData.append('appointment_id', appointment.id);\n    formData.append('status', status);\n    try {\n      const response = await fetch(`${user_uri}`,\n        {\n          method: 'PUT',\n          body: formData,\n        }\n      );\n  \n      if (response.ok) {\n        setStatus(status);\n        \n      } else {\n        console.error('Error updating appointment status:', response.status);\n      }\n    } catch (error) {\n      console.error('Error updating appointment status:', error);\n    } finally {\n      setUpdatingStatus(false);\n    }\n  };\n\n  return (\n    <tr>\n      <td>{appointment.patient}</td>\n      <td>{appointment.doctor}</td>\n      <td>{formatDate(appointment.datetime)}</td>\n      <td>{formatTime(appointment.datetime)}</td>\n      <td>{getStatusString(status)}</td>\n      <td>\n        <button onClick={handleShow} className='w-100 mx-auto' style={{position:'relative'}}>View</button>\n        <Modal size=\"lg\" show={show} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title><strong>Appointment Details</strong></Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <div>\n            <AppointmentDetails appointment_id={ appointment.id }/>\n          </div>\n        </Modal.Body>\n      </Modal>\n      </td>\n      {userType === false && appointment.status === 0 && updatingStatus && (\n        <td>\n          <div style={{display:'flex'}}>\n          <button onClick={()=>updateAppointmentStatus(1)}>✓</button>\n          <button onClick={()=>updateAppointmentStatus(-1)}>✕</button>\n          </div>\n        </td>\n      )}\n    </tr>\n  );\n};\n\nexport default Appointment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}